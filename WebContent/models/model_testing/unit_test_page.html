 <!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>MWWW Unit Test Page</title>
		
		<script src="https://d3js.org/d3.v4.js"></script>
		<script src="../airway_model_B.js"></script>
		
		<script>
			function test(data)
			{
				model = new Airway();
				var short, short_match, res, res_match;
				
				for (i = 0; i < data.length; i++)
				{
					model.update(data[i].A, data[i].B, data[i].C, data[i].D, data[i].xmax, data[i].y, data[i].z, data[i].logd);
					
					short = model.shortening(data[i].logd);
					short_match = Boolean(Math.abs(short - data[i].x) < 0.00000000009);
					res = model.resistance(data[i].logd);
					res_match = Boolean(Math.abs(res - data[i].R) < 0.00000000009);
					
					document.write((i+1)+",&emsp;"+(data[i].x)+",&emsp;"+(short)+",&emsp;"+(short_match)+",&emsp;"+(data[i].R)+",&emsp;"+(res)+",&emsp;"+(res_match)+"<br>");
				}
			}
			
			function convert(data)
			{
				var row = new Object();
				
				row.A = +data.A;
				row.B = +data.B;
				row.C = +data.C;
				row.D = +data.D;
				row.xmax = +data.xmax;
				row.y = +data.y;
				row.z = +data.z;
				row.logd = +data.logd;
				row.x = +data.x;
				row.R = +data.R;
				
				return row;
			}
		</script>
	</head>

	<body>
		<h1>Row,&emsp;Shortening (expected),&emsp;Shortening (result),&emsp;Match?,&emsp;Resistance (expected),&emsp;Resistance (result),&emsp;Match?</h1><br>
			
		<script>
			d3.csv("test_values.csv", convert, test);
		</script>
	</body>
</html> 
